{% assign accordionId = id | default: 'accordion-' | append: forloop.index %}
{% assign panelId = accordionId | append: '-panel' %}
{% assign expanded = expanded | default: false %}
{% assign showClose = show_close | default: false %}

<div class="accordion-item">
  <h3 class="accordion-item__header">
    <button 
      type="button" 
      id="{{ accordionId }}"
      class="accordion-item__trigger"
      data-accordion="{{ panelId }}"
      aria-expanded="{{ expanded }}"
      aria-controls="{{ panelId }}">
      <span class="accordion-item__title">{{ title }}</span>
      <span class="accordion-item__icon" aria-hidden="true"></span>
    </button>
  </h3>
  
  <div 
    id="{{ panelId }}"
    class="accordion-item__panel"
    role="region"
    aria-labelledby="{{ accordionId }}"
    {% unless expanded %}aria-hidden="true" style="display: none;"{% endunless %}>
    <div class="accordion-item__content">
      {{ content }}
    </div>
    {% if showClose %}
      <button 
        type="button" 
        class="accordion-item__close"
        data-accordion-close
        aria-label="{{ title }}パネルを閉じる">
        {{ close_text | default: '閉じる' }}
      </button>
    {% endif %}
  </div>
</div>